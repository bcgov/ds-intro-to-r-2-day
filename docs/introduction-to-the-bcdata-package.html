<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Introduction to the bcdata package | Introduction to Data Science using R Workshop</title>
  <meta name="description" content="This book contains materials for a 2 day Introduction to R workshop" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Introduction to the bcdata package | Introduction to Data Science using R Workshop" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book contains materials for a 2 day Introduction to R workshop" />
  <meta name="github-repo" content="bcgov/ds-intro-to-r-2-day" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Introduction to the bcdata package | Introduction to Data Science using R Workshop" />
  
  <meta name="twitter:description" content="This book contains materials for a 2 day Introduction to R workshop" />
  

<meta name="author" content="Sam Albers, Stephanie Hazlitt, Genevieve Perkins &amp; Andy Teucher" />


<meta name="date" content="2020-11-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="create-tidy-data-with-tidyr.html"/>
<link rel="next" href="data-analysis-reports.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>
<script src="libs/FlatGeoBuf-3.3.3/fgb.js"></script>
<script src="libs/FlatGeoBuf-3.3.3/flatgeobuf-geojson.min.js"></script>
<script src="libs/chromajs-2.1.0/chroma.min.js"></script>
<link id="lib_all-1-attachment" rel="attachment" href="libs/lib_all-0.0.1/lib_all_layer.fgb"/>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to Data Science using R Workshop</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Introduction to R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#before-starting-the-workshop"><i class="fa fa-check"></i><b>1.2</b> Before Starting The Workshop</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#introduction-to-rstudio"><i class="fa fa-check"></i><b>1.3</b> Introduction to RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#work-flow-within-rstudio"><i class="fa fa-check"></i><b>1.4</b> Work flow within RStudio</a></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#introduction-to-r"><i class="fa fa-check"></i><b>1.5</b> Introduction to R</a></li>
<li class="chapter" data-level="1.6" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#using-r-as-a-calculator"><i class="fa fa-check"></i><b>1.6</b> Using R as a calculator</a></li>
<li class="chapter" data-level="1.7" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#mathematical-functions"><i class="fa fa-check"></i><b>1.7</b> Mathematical functions</a></li>
<li class="chapter" data-level="1.8" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#comparing-things"><i class="fa fa-check"></i><b>1.8</b> Comparing things</a></li>
<li class="chapter" data-level="1.9" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#variables-and-assignment"><i class="fa fa-check"></i><b>1.9</b> Variables and assignment</a></li>
<li class="chapter" data-level="1.10" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#vectorization"><i class="fa fa-check"></i><b>1.10</b> Vectorization</a></li>
<li class="chapter" data-level="1.11" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#managing-your-environment"><i class="fa fa-check"></i><b>1.11</b> Managing your environment</a></li>
<li class="chapter" data-level="1.12" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#r-packages"><i class="fa fa-check"></i><b>1.12</b> R Packages</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="seeking-help-in-r.html"><a href="seeking-help-in-r.html"><i class="fa fa-check"></i><b>2</b> Seeking Help in R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="seeking-help-in-r.html"><a href="seeking-help-in-r.html#reading-help-files"><i class="fa fa-check"></i><b>2.1</b> Reading Help files</a></li>
<li class="chapter" data-level="2.2" data-path="seeking-help-in-r.html"><a href="seeking-help-in-r.html#special-operators"><i class="fa fa-check"></i><b>2.2</b> Special Operators</a></li>
<li class="chapter" data-level="2.3" data-path="seeking-help-in-r.html"><a href="seeking-help-in-r.html#getting-help-on-packages"><i class="fa fa-check"></i><b>2.3</b> Getting help on packages</a></li>
<li class="chapter" data-level="2.4" data-path="seeking-help-in-r.html"><a href="seeking-help-in-r.html#when-you-kind-of-remember-the-function"><i class="fa fa-check"></i><b>2.4</b> When you kind of remember the function</a></li>
<li class="chapter" data-level="2.5" data-path="seeking-help-in-r.html"><a href="seeking-help-in-r.html#when-you-have-no-idea-where-to-begin"><i class="fa fa-check"></i><b>2.5</b> When you have no idea where to begin</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="project-management-with-rstudio.html"><a href="project-management-with-rstudio.html"><i class="fa fa-check"></i><b>3</b> Project Management With RStudio</a>
<ul>
<li class="chapter" data-level="3.1" data-path="project-management-with-rstudio.html"><a href="project-management-with-rstudio.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="project-management-with-rstudio.html"><a href="project-management-with-rstudio.html#a-possible-solution"><i class="fa fa-check"></i><b>3.2</b> A possible solution</a></li>
<li class="chapter" data-level="3.3" data-path="project-management-with-rstudio.html"><a href="project-management-with-rstudio.html#best-practices-for-project-organization"><i class="fa fa-check"></i><b>3.3</b> Best practices for project organization</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="project-management-with-rstudio.html"><a href="project-management-with-rstudio.html#treat-data-as-read-only"><i class="fa fa-check"></i><b>3.3.1</b> Treat data as read only</a></li>
<li class="chapter" data-level="3.3.2" data-path="project-management-with-rstudio.html"><a href="project-management-with-rstudio.html#data-cleaning"><i class="fa fa-check"></i><b>3.3.2</b> Data Cleaning</a></li>
<li class="chapter" data-level="3.3.3" data-path="project-management-with-rstudio.html"><a href="project-management-with-rstudio.html#treat-generated-output-as-disposable"><i class="fa fa-check"></i><b>3.3.3</b> Treat generated output as disposable</a></li>
<li class="chapter" data-level="3.3.4" data-path="project-management-with-rstudio.html"><a href="project-management-with-rstudio.html#separate-function-definition-and-application"><i class="fa fa-check"></i><b>3.3.4</b> Separate function definition and application</a></li>
<li class="chapter" data-level="3.3.5" data-path="project-management-with-rstudio.html"><a href="project-management-with-rstudio.html#version-control"><i class="fa fa-check"></i><b>3.3.5</b> Version Control</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>4</b> Data Structures</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-structures.html"><a href="data-structures.html#the-readr-package"><i class="fa fa-check"></i><b>4.1</b> The <em>readr</em> package</a></li>
<li class="chapter" data-level="4.2" data-path="data-structures.html"><a href="data-structures.html#data-types"><i class="fa fa-check"></i><b>4.2</b> Data Types</a></li>
<li class="chapter" data-level="4.3" data-path="data-structures.html"><a href="data-structures.html#vectors-and-type-coercion"><i class="fa fa-check"></i><b>4.3</b> Vectors and Type Coercion</a></li>
<li class="chapter" data-level="4.4" data-path="data-structures.html"><a href="data-structures.html#data-frames"><i class="fa fa-check"></i><b>4.4</b> Data Frames</a></li>
<li class="chapter" data-level="4.5" data-path="data-structures.html"><a href="data-structures.html#factors"><i class="fa fa-check"></i><b>4.5</b> Factors</a></li>
<li class="chapter" data-level="4.6" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>4.6</b> Lists</a></li>
<li class="chapter" data-level="4.7" data-path="data-structures.html"><a href="data-structures.html#matrices"><i class="fa fa-check"></i><b>4.7</b> Matrices</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="exploring-data-frames.html"><a href="exploring-data-frames.html"><i class="fa fa-check"></i><b>5</b> Exploring Data Frames</a>
<ul>
<li class="chapter" data-level="5.1" data-path="exploring-data-frames.html"><a href="exploring-data-frames.html#introducing-the-gapminder-data"><i class="fa fa-check"></i><b>5.1</b> Introducing the Gapminder data</a></li>
<li class="chapter" data-level="5.2" data-path="exploring-data-frames.html"><a href="exploring-data-frames.html#basic-subsetting"><i class="fa fa-check"></i><b>5.2</b> Basic subsetting</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="exploring-data-frames.html"><a href="exploring-data-frames.html#selecting-rows"><i class="fa fa-check"></i><b>5.2.1</b> Selecting rows</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="creating-publication-quality-graphics-with-ggplot2.html"><a href="creating-publication-quality-graphics-with-ggplot2.html"><i class="fa fa-check"></i><b>6</b> Creating Publication-Quality Graphics with ggplot2</a>
<ul>
<li class="chapter" data-level="6.1" data-path="creating-publication-quality-graphics-with-ggplot2.html"><a href="creating-publication-quality-graphics-with-ggplot2.html#getting-started"><i class="fa fa-check"></i><b>6.1</b> Getting started</a></li>
<li class="chapter" data-level="6.2" data-path="creating-publication-quality-graphics-with-ggplot2.html"><a href="creating-publication-quality-graphics-with-ggplot2.html#layers"><i class="fa fa-check"></i><b>6.2</b> Layers</a></li>
<li class="chapter" data-level="6.3" data-path="creating-publication-quality-graphics-with-ggplot2.html"><a href="creating-publication-quality-graphics-with-ggplot2.html#transformations-and-statistics"><i class="fa fa-check"></i><b>6.3</b> Transformations and statistics</a></li>
<li class="chapter" data-level="6.4" data-path="creating-publication-quality-graphics-with-ggplot2.html"><a href="creating-publication-quality-graphics-with-ggplot2.html#multi-panel-figures"><i class="fa fa-check"></i><b>6.4</b> Multi-panel figures</a></li>
<li class="chapter" data-level="6.5" data-path="creating-publication-quality-graphics-with-ggplot2.html"><a href="creating-publication-quality-graphics-with-ggplot2.html#modifying-text"><i class="fa fa-check"></i><b>6.5</b> Modifying text</a></li>
<li class="chapter" data-level="6.6" data-path="creating-publication-quality-graphics-with-ggplot2.html"><a href="creating-publication-quality-graphics-with-ggplot2.html#exporting-the-plot"><i class="fa fa-check"></i><b>6.6</b> Exporting the plot</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dataframe-manipulation-with-dplyr.html"><a href="dataframe-manipulation-with-dplyr.html"><i class="fa fa-check"></i><b>7</b> Dataframe Manipulation with dplyr</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dataframe-manipulation-with-dplyr.html"><a href="dataframe-manipulation-with-dplyr.html#the-dplyr-package"><i class="fa fa-check"></i><b>7.1</b> The <code>dplyr</code> package</a></li>
<li class="chapter" data-level="7.2" data-path="dataframe-manipulation-with-dplyr.html"><a href="dataframe-manipulation-with-dplyr.html#using-select"><i class="fa fa-check"></i><b>7.2</b> Using select()</a></li>
<li class="chapter" data-level="7.3" data-path="dataframe-manipulation-with-dplyr.html"><a href="dataframe-manipulation-with-dplyr.html#using-filter"><i class="fa fa-check"></i><b>7.3</b> Using filter()</a></li>
<li class="chapter" data-level="7.4" data-path="dataframe-manipulation-with-dplyr.html"><a href="dataframe-manipulation-with-dplyr.html#using-filter-with-pipes"><i class="fa fa-check"></i><b>7.4</b> Using filter() with pipes</a></li>
<li class="chapter" data-level="7.5" data-path="dataframe-manipulation-with-dplyr.html"><a href="dataframe-manipulation-with-dplyr.html#using-group_by-and-summarize"><i class="fa fa-check"></i><b>7.5</b> Using group_by() and summarize()</a></li>
<li class="chapter" data-level="7.6" data-path="dataframe-manipulation-with-dplyr.html"><a href="dataframe-manipulation-with-dplyr.html#using-summarize"><i class="fa fa-check"></i><b>7.6</b> Using summarize()</a></li>
<li class="chapter" data-level="7.7" data-path="dataframe-manipulation-with-dplyr.html"><a href="dataframe-manipulation-with-dplyr.html#using-count"><i class="fa fa-check"></i><b>7.7</b> Using count()</a></li>
<li class="chapter" data-level="7.8" data-path="dataframe-manipulation-with-dplyr.html"><a href="dataframe-manipulation-with-dplyr.html#using-mutate"><i class="fa fa-check"></i><b>7.8</b> Using mutate()</a></li>
<li class="chapter" data-level="7.9" data-path="dataframe-manipulation-with-dplyr.html"><a href="dataframe-manipulation-with-dplyr.html#connect-mutate-with-logical-groupings-ifelse"><i class="fa fa-check"></i><b>7.9</b> Connect mutate with logical groupings: ifelse</a></li>
<li class="chapter" data-level="7.10" data-path="dataframe-manipulation-with-dplyr.html"><a href="dataframe-manipulation-with-dplyr.html#combining-dplyr-and-ggplot2"><i class="fa fa-check"></i><b>7.10</b> Combining <code>dplyr</code> and <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.11" data-path="dataframe-manipulation-with-dplyr.html"><a href="dataframe-manipulation-with-dplyr.html#other-great-resources"><i class="fa fa-check"></i><b>7.11</b> Other great resources</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="create-tidy-data-with-tidyr.html"><a href="create-tidy-data-with-tidyr.html"><i class="fa fa-check"></i><b>8</b> Create Tidy Data with tidyr</a>
<ul>
<li class="chapter" data-level="8.1" data-path="create-tidy-data-with-tidyr.html"><a href="create-tidy-data-with-tidyr.html#getting-started-1"><i class="fa fa-check"></i><b>8.1</b> Getting started</a></li>
<li class="chapter" data-level="8.2" data-path="create-tidy-data-with-tidyr.html"><a href="create-tidy-data-with-tidyr.html#from-wide-to-long-format-with-pivot_longer"><i class="fa fa-check"></i><b>8.2</b> From wide to long format with pivot_longer()</a></li>
<li class="chapter" data-level="8.3" data-path="create-tidy-data-with-tidyr.html"><a href="create-tidy-data-with-tidyr.html#from-long-to-intermediate-format-with-pivot_wider"><i class="fa fa-check"></i><b>8.3</b> From long to intermediate format with pivot_wider()</a></li>
<li class="chapter" data-level="8.4" data-path="create-tidy-data-with-tidyr.html"><a href="create-tidy-data-with-tidyr.html#other-great-resources-1"><i class="fa fa-check"></i><b>8.4</b> Other great resources</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="introduction-to-the-bcdata-package.html"><a href="introduction-to-the-bcdata-package.html"><i class="fa fa-check"></i><b>9</b> Introduction to the bcdata package</a>
<ul>
<li class="chapter" data-level="9.1" data-path="introduction-to-the-bcdata-package.html"><a href="introduction-to-the-bcdata-package.html#getting-started-2"><i class="fa fa-check"></i><b>9.1</b> Getting started</a></li>
<li class="chapter" data-level="9.2" data-path="introduction-to-the-bcdata-package.html"><a href="introduction-to-the-bcdata-package.html#searching-the-b.c.-data-catalogue"><i class="fa fa-check"></i><b>9.2</b> Searching the B.C. Data Catalogue</a></li>
<li class="chapter" data-level="9.3" data-path="introduction-to-the-bcdata-package.html"><a href="introduction-to-the-bcdata-package.html#importing-data-from-the-b.c.-data-catalogue"><i class="fa fa-check"></i><b>9.3</b> Importing data from the B.C. Data Catalogue</a></li>
<li class="chapter" data-level="9.4" data-path="introduction-to-the-bcdata-package.html"><a href="introduction-to-the-bcdata-package.html#practice-manipulating-data-with-dplyr"><i class="fa fa-check"></i><b>9.4</b> Practice manipulating data with <code>dplyr</code></a></li>
<li class="chapter" data-level="9.5" data-path="introduction-to-the-bcdata-package.html"><a href="introduction-to-the-bcdata-package.html#practice-plotting-data-with-ggplot2"><i class="fa fa-check"></i><b>9.5</b> Practice plotting data with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.6" data-path="introduction-to-the-bcdata-package.html"><a href="introduction-to-the-bcdata-package.html#using-bcdata-with-spatial-data-in-the-b.c.-data-catalogue"><i class="fa fa-check"></i><b>9.6</b> Using <code>bcdata</code> with spatial data in the B.C. Data Catalogue</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html"><i class="fa fa-check"></i><b>10</b> Data analysis reports</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#literate-programming"><i class="fa fa-check"></i><b>10.1</b> Literate programming</a></li>
<li class="chapter" data-level="10.2" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#example-of-using-r-markdown-in-the-bc-government"><i class="fa fa-check"></i><b>10.2</b> Example of Using R Markdown in the BC Government</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#documentation"><i class="fa fa-check"></i><b>10.2.1</b> Documentation</a></li>
<li class="chapter" data-level="10.2.2" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#teaching"><i class="fa fa-check"></i><b>10.2.2</b> Teaching</a></li>
<li class="chapter" data-level="10.2.3" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#presentation"><i class="fa fa-check"></i><b>10.2.3</b> Presentation</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#creating-an-r-markdown-file"><i class="fa fa-check"></i><b>10.3</b> Creating an R Markdown file</a></li>
<li class="chapter" data-level="10.4" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#basic-components-of-r-markdown"><i class="fa fa-check"></i><b>10.4</b> Basic components of R Markdown</a></li>
<li class="chapter" data-level="10.5" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#markdown"><i class="fa fa-check"></i><b>10.5</b> Markdown</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#a-bit-more-markdown"><i class="fa fa-check"></i><b>10.5.1</b> A bit more Markdown</a></li>
<li class="chapter" data-level="10.5.2" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#r-code-chunks"><i class="fa fa-check"></i><b>10.5.2</b> R code chunks</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#how-r-markdown-gets-compiled"><i class="fa fa-check"></i><b>10.6</b> How R Markdown gets compiled</a></li>
<li class="chapter" data-level="10.7" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#chunk-options"><i class="fa fa-check"></i><b>10.7</b> Chunk options</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#global-options"><i class="fa fa-check"></i><b>10.7.1</b> Global options</a></li>
<li class="chapter" data-level="10.7.2" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#formatting-figures"><i class="fa fa-check"></i><b>10.7.2</b> Formatting figures</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#inline-r-code"><i class="fa fa-check"></i><b>10.8</b> Inline R code</a></li>
<li class="chapter" data-level="10.9" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#other-outputs-word-pdf-and-more"><i class="fa fa-check"></i><b>10.9</b> Other outputs: Word, PDF and more…</a>
<ul>
<li class="chapter" data-level="10.9.1" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#a-note-about-rmd-outputs"><i class="fa fa-check"></i><b>10.9.1</b> A note about Rmd outputs</a></li>
</ul></li>
<li class="chapter" data-level="10.10" data-path="data-analysis-reports.html"><a href="data-analysis-reports.html#resources"><i class="fa fa-check"></i><b>10.10</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="applications-of-r-markdown.html"><a href="applications-of-r-markdown.html"><i class="fa fa-check"></i><b>11</b> Applications of R Markdown</a></li>
<li class="chapter" data-level="12" data-path="seeking-help-from-others-with-reprex.html"><a href="seeking-help-from-others-with-reprex.html"><i class="fa fa-check"></i><b>12</b> Seeking Help from Others with reprex</a>
<ul>
<li class="chapter" data-level="12.1" data-path="seeking-help-from-others-with-reprex.html"><a href="seeking-help-from-others-with-reprex.html#help-people-help-you---reprex"><i class="fa fa-check"></i><b>12.1</b> Help People Help You - reprex</a></li>
<li class="chapter" data-level="12.2" data-path="seeking-help-from-others-with-reprex.html"><a href="seeking-help-from-others-with-reprex.html#other-helpful-resources"><i class="fa fa-check"></i><b>12.2</b> Other Helpful Resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Science using R Workshop</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-the-bcdata-package" class="section level1" number="9">
<h1><span class="header-section-number">Chapter 9</span> Introduction to the bcdata package</h1>
<p>The bcdata R package contains functions for searching &amp; retrieving data directly from the B.C. Data Catalogue.</p>
<div id="getting-started-2" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Getting started</h2>
<p>First we need to install the <code>bcdata</code> package:</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="introduction-to-the-bcdata-package.html#cb413-1" aria-hidden="true"></a><span class="kw">install.packages</span>(<span class="st">&quot;bcdata&quot;</span>)</span></code></pre></div>
<p>And next we need to load the <code>bcdata</code> package, along with <code>dplyr</code> and <code>ggplot2</code> which we installed and used in earlier lessons:</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="introduction-to-the-bcdata-package.html#cb414-1" aria-hidden="true"></a><span class="kw">library</span>(bcdata)</span></code></pre></div>
<pre><code>
Attaching package: &#39;bcdata&#39;</code></pre>
<pre><code>The following object is masked from &#39;package:stats&#39;:

    filter</code></pre>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="introduction-to-the-bcdata-package.html#cb417-1" aria-hidden="true"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb417-2"><a href="introduction-to-the-bcdata-package.html#cb417-2" aria-hidden="true"></a><span class="kw">library</span>(ggplot2)</span></code></pre></div>
</div>
<div id="searching-the-b.c.-data-catalogue" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Searching the B.C. Data Catalogue</h2>
<p>Let’s use the <code>bcdata</code> package to search the B.C. Data Catalogue for some data on <em><strong>public libraries</strong></em> in British Columbia:</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="introduction-to-the-bcdata-package.html#cb418-1" aria-hidden="true"></a><span class="kw">bcdc_search</span>(<span class="st">&quot;public libraries&quot;</span>)</span></code></pre></div>
<pre><code>List of B.C. Data Catalogue Records
Number of records: 24
 (Showing the top 10)
Titles:
1: BC Public Libraries Systems - Branches and Locations (other, csv,
 xlsx, kml, wms)
 ID: 3d2318d4-8f5d-4208-88f5-995420d7c58f
 Name: bc-public-libraries-systems-branches-and-locations
2: BC Public Libraries Statistics 2002-Present (xlsx, csv)
 ID: d03007d6-d6c7-44d7-b2f8-710ba9433617
 Name: bc-public-libraries-statistics-2002-present
3: Environmental Protection Information Resources e-Library ()
 ID: dae0f2c3-b4f4-4d16-a96d-d7fe7c1581f3
 Name: environmental-protection-information-resources-e-library
4: Biodiversity/Environmental Information Resources e-Library (html)
 ID: a77d4986-91a1-42fc-8e5c-51a304c7975e
 Name: biodiversity-environmental-information-resources-e-library
5: BC Laws API (html, openapi-json, json)
 ID: 6e815cf7-cb83-4655-9ad4-a926ae4e59f7
 Name: bc-laws-api
6: Terrestrial Ecosystem Information Scanned Map Boundary (other, wms,
 kml)
 ID: 12d2c2b0-b2f6-4ab1-92af-842a4d66b5c2
 Name: terrestrial-ecosystem-information-scanned-map-boundary
7: BC Web Map Library (kml, wms)
 ID: 6164a2af-d3ac-4e92-8dbe-51a93bb5e24b
 Name: bc-web-map-library
8: Ecological Catalogue (formerly AquaCat) (other, wms, kml)
 ID: 7904d8e9-64b4-4acc-89f1-70a42bc1da6e
 Name: ecological-catalogue-formerly-aquacat
9: Sensitive Ecosystems Inventory (SEI) Project Boundaries (other, wms,
 kml)
 ID: 5a5680fa-29e0-4ad2-b2ce-ff0dabc1f666
 Name: sensitive-ecosystems-inventory-sei-project-boundaries
10: Species Distribution Modeling and Wildlife Habitat Ratings Project
 Boundaries (other)
 ID: 0881df25-a55b-4428-9763-e37be74ba77e
 Name:
  species-distribution-modeling-and-wildlife-habitat-ratings-project-boundaries

Access a single record by calling `bcdc_get_record(ID)` with the ID
 from the desired record.</code></pre>
<p>There are many catalogue records with data relating to libraries. Let’s examine the first returned record more closely:</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="introduction-to-the-bcdata-package.html#cb420-1" aria-hidden="true"></a><span class="kw">bcdc_get_record</span>(<span class="st">&quot;bc-public-libraries-systems-branches-and-locations&quot;</span>)</span></code></pre></div>
<pre><code>Warning: It is advised to use the permanent id (&#39;3d2318d4-8f5d-4208-88f5-995420d7c58f&#39;) rather than the name of the record (&#39;bc-public-libraries-systems-branches-and-locations&#39;) to guard against future name changes.</code></pre>
<pre><code>B.C. Data Catalogue Record: BC Public Libraries Systems - Branches and
 Locations
Name: bc-public-libraries-systems-branches-and-locations (ID:
 3d2318d4-8f5d-4208-88f5-995420d7c58f)
Permalink:
 https://catalogue.data.gov.bc.ca/dataset/3d2318d4-8f5d-4208-88f5-995420d7c58f
Sector: Education
Licence: Open Government Licence - British Columbia
Type: Geographic
Last Updated: 2020-11-03
Description: This dataset includes contact and location data for all
 library service points in BC. It also includes some primary data on
 library use and services from the most current year that data is
 available. 
 
 The dataset is geolocational, and is available in XLSX,
 CSV, and KML formats.
Resources: (7)
# A tibble: 7 x 8
  name      url       id      format ext   package_id  location bcdata_available
  &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;    &lt;lgl&gt;           
1 BC Geogr… https://… 3aa4c6… other  &quot;&quot;    3d2318d4-8… bcgeogr… FALSE           
2 BC Publi… https://… 21f797… csv    &quot;csv&quot; 3d2318d4-8… ministr… TRUE            
3 2018 BC … https://… ed17f1… xlsx   &quot;xls&quot; 3d2318d4-8… ministr… TRUE            
4 2018 BC … https://… b6a28b… csv    &quot;csv&quot; 3d2318d4-8… ministr… TRUE            
5 2015 BC … https://… 9ce9e0… kml    &quot;kml&quot; 3d2318d4-8… catalog… TRUE            
6 WMS getC… https://… e5cad3… wms    &quot;&quot;    3d2318d4-8… bcgeogr… TRUE            
7 KML Netw… https://… ef8205… kml    &quot;kml&quot; 3d2318d4-8… bcgeogr… FALSE           
You can access the &#39;Resources&#39; data frame using bcdc_tidy_resources()</code></pre>
</div>
<div id="importing-data-from-the-b.c.-data-catalogue" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Importing data from the B.C. Data Catalogue</h2>
<p>Next, we can use the <code>bcdc_get_data</code> function to import this data directly into R:</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="introduction-to-the-bcdata-package.html#cb423-1" aria-hidden="true"></a><span class="kw">bcdc_get_data</span>(<span class="dt">record =</span> <span class="st">&quot;bc-public-libraries-systems-branches-and-locations&quot;</span>)</span></code></pre></div>
<p>The <em>bc-public-libraries-systems-branches-and-locations</em> catalogue record contains multiple data resources or files. If we run the above code interactively, R will prompt you in the console to select one of the available resources, as it does not know which one you want to download. The full code to import the resource from the record—using the record’s permanent id to guard against future name changesname—is provided to the user for next time:</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="introduction-to-the-bcdata-package.html#cb424-1" aria-hidden="true"></a>lib_raw &lt;-<span class="st"> </span><span class="kw">bcdc_get_data</span>(<span class="st">&#39;3d2318d4-8f5d-4208-88f5-995420d7c58f&#39;</span>,</span>
<span id="cb424-2"><a href="introduction-to-the-bcdata-package.html#cb424-2" aria-hidden="true"></a>                         <span class="dt">resource =</span> <span class="st">&#39;ed17f111-fb39-46b3-89aa-5375592fbb01&#39;</span>)</span></code></pre></div>
<pre><code>Reading the data using the read_xls function from the readxl package.</code></pre>
<blockquote>
<h2 id="challenge-1-5-minutes">Challenge 1 (5 minutes)</h2>
<p>Take a few minutes to search the B.C. Data Catalogue for data sets for a different topic. Identify and import one tabular data set into your R session &gt; (e.g. a CSV or XLS resource).</p>
</blockquote>
</div>
<div id="practice-manipulating-data-with-dplyr" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> Practice manipulating data with <code>dplyr</code></h2>
<p>Let’s return to the libraries data frame <code>lib-raw</code> we imported. As we learned earlier in the workshop, a useful first step is to get familiar with the data:</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="introduction-to-the-bcdata-package.html#cb426-1" aria-hidden="true"></a><span class="kw">str</span>(lib_raw)</span></code></pre></div>
<pre><code>tibble [253 × 38] (S3: tbl_df/tbl/data.frame)
 $ Library System                                               : chr [1:253] &quot;Alert Bay Public Library &amp; Museum&quot; &quot;Beaver Valley Public Library&quot; &quot;Bowen Island Public Library&quot; &quot;Burnaby Public Library&quot; ...
 $ Location                                                     : chr [1:253] &quot;Alert Bay Public Library &amp; Museum&quot; &quot;Beaver Valley Public Library&quot; &quot;Bowen Island Public Library&quot; &quot;Bob Prittie Metrotown Branch&quot; ...
 $ 1x Branch Unique ID                                          : chr [1:253] &quot;BABM001&quot; &quot;BFBV001&quot; &quot;BBI001&quot; &quot;BB001&quot; ...
 $ School District Served                                       : chr [1:253] &quot;85&quot; &quot;20&quot; &quot;45&quot; &quot;41&quot; ...
 $ Phone                                                        : chr [1:253] &quot;(250) 974-5721&quot; &quot;(250) 367-7114&quot; &quot;(604) 947-9788&quot; &quot;(604) 436-5427&quot; ...
 $ Physical Address                                             : chr [1:253] &quot;116 Fir Street&quot; &quot;1847 - 1st Street&quot; &quot;430 Bowen Island Trunk&quot; &quot;6100 Willingdon Avenue&quot; ...
 $ City                                                         : chr [1:253] &quot;Alert Bay&quot; &quot;Fruitvale&quot; &quot;Bowen Island&quot; &quot;Burnaby&quot; ...
 $ Province                                                     : chr [1:253] &quot;BC&quot; &quot;BC&quot; &quot;BC&quot; &quot;BC&quot; ...
 $ Postal Code                                                  : chr [1:253] &quot;V0N 1A0&quot; &quot;V0G 1L0&quot; &quot;V0N 1G0&quot; &quot;V5H 4N5&quot; ...
 $ Latitude                                                     : num [1:253] 50.6 49.1 49.4 49.2 49.3 ...
 $ Longitude                                                    : num [1:253] -127 -118 -123 -123 -123 ...
 $ 460x Total branch physical materials, volumes held           : num [1:253] 9361 25477 15100 373232 59958 ...
 $ 556x Branch circulation of print and other physical materials: num [1:253] 2460 19792 36155 1139184 454254 ...
 $ 565x Branch circulation of children&#39;s materials              : chr [1:253] &quot;193&quot; &quot;4737&quot; &quot;15964&quot; &quot;476345&quot; ...
 $ 610x Branch reference transactions                           : chr [1:253] &quot;1700&quot; &quot;10000&quot; &quot;8217&quot; &quot;107784&quot; ...
 $ 775x In person visits to this branch or service point        : chr [1:253] &quot;3522&quot; &quot;14750&quot; &quot;52690&quot; &quot;749695&quot; ...
 $ 680x Branch in-library adult programs                        : chr [1:253] &quot;0&quot; &quot;8&quot; &quot;499&quot; &quot;58&quot; ...
 $ 682x Branch outreach adult programs                          : chr [1:253] &quot;1&quot; &quot;2&quot; &quot;0&quot; &quot;101&quot; ...
 $ 690x Attendance at adult programs                            : chr [1:253] &quot;22&quot; &quot;202&quot; &quot;1381&quot; &quot;3865&quot; ...
 $ 700x Branch in-library children&#39;s programs                   : chr [1:253] &quot;0&quot; &quot;100&quot; &quot;94&quot; &quot;402&quot; ...
 $ 702x Branch outreach children&#39;s programs                     : chr [1:253] &quot;3&quot; &quot;10&quot; &quot;5&quot; &quot;39&quot; ...
 $ 710x Attendance at children&#39;s programs                       : chr [1:253] &quot;235&quot; &quot;1208&quot; &quot;1224&quot; &quot;19522&quot; ...
 $ 715x Branch in-library young adult programs                  : chr [1:253] &quot;0&quot; &quot;0&quot; &quot;0&quot; &quot;12&quot; ...
 $ 717x Branch outreach young adult programs                    : chr [1:253] &quot;0&quot; &quot;0&quot; &quot;0&quot; &quot;84&quot; ...
 $ 716x Attendance at young adult programs                      : chr [1:253] &quot;0&quot; &quot;0&quot; &quot;0&quot; &quot;2923&quot; ...
 $ 671x Branch in-library newcomer/ELL programs, all ages       : chr [1:253] &quot;0&quot; &quot;0&quot; &quot;0&quot; &quot;26&quot; ...
 $ 673x Branch outreach newcomer/ELL programs, all ages         : chr [1:253] &quot;0&quot; &quot;0&quot; &quot;0&quot; &quot;0&quot; ...
 $ 672x Attendance at branch newcomer/ELL programs              : chr [1:253] &quot;0&quot; &quot;0&quot; &quot;0&quot; &quot;528&quot; ...
 $ 740x Professional Librarians, hours worked at this branch    : chr [1:253] &quot;0&quot; &quot;0&quot; &quot;1820&quot; &quot;42224&quot; ...
 $ 742x Library Technicians, hours worked at this branch        : chr [1:253] &quot;0&quot; &quot;0&quot; &quot;0&quot; &quot;1733&quot; ...
 $ 752x Community Librarians, hours worked at this branch       : chr [1:253] &quot;622&quot; &quot;4940&quot; &quot;0&quot; NA ...
 $ 770x Other Staff, hours worked at this branch                : chr [1:253] &quot;281&quot; &quot;1350&quot; &quot;4107&quot; &quot;104199&quot; ...
 $ 975x Number of photocopiers in library branch                : num [1:253] 1 1 1 4 1 1 1 2 1 1 ...
 $ 852x Is this location LEED certified?                        : chr [1:253] NA &quot;No&quot; &quot;No&quot; &quot;No&quot; ...
 $ 854x Is this location a Shared Space facility?               : chr [1:253] NA &quot;No&quot; &quot;Yes&quot; &quot;No&quot; ...
 $ 860x Branch space/size, total square metres                  : num [1:253] 213 270 407 5673 465 ...
 $ 890x Hours open per year at this location                    : chr [1:253] &quot;618&quot; &quot;2320&quot; &quot;1953&quot; &quot;3612&quot; ...
 $ 920x Days open per year at this location                     : chr [1:253] &quot;191&quot; &quot;321&quot; &quot;303&quot; &quot;339&quot; ...</code></pre>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="introduction-to-the-bcdata-package.html#cb428-1" aria-hidden="true"></a><span class="kw">names</span>(lib_raw)</span></code></pre></div>
<pre><code> [1] &quot;Library System&quot;                                               
 [2] &quot;Location&quot;                                                     
 [3] &quot;1x Branch Unique ID&quot;                                          
 [4] &quot;School District Served&quot;                                       
 [5] &quot;Phone&quot;                                                        
 [6] &quot;Physical Address&quot;                                             
 [7] &quot;City&quot;                                                         
 [8] &quot;Province&quot;                                                     
 [9] &quot;Postal Code&quot;                                                  
[10] &quot;Latitude&quot;                                                     
[11] &quot;Longitude&quot;                                                    
[12] &quot;460x Total branch physical materials, volumes held&quot;           
[13] &quot;556x Branch circulation of print and other physical materials&quot;
[14] &quot;565x Branch circulation of children&#39;s materials&quot;              
[15] &quot;610x Branch reference transactions&quot;                           
[16] &quot;775x In person visits to this branch or service point&quot;        
[17] &quot;680x Branch in-library adult programs&quot;                        
[18] &quot;682x Branch outreach adult programs&quot;                          
[19] &quot;690x Attendance at adult programs&quot;                            
[20] &quot;700x Branch in-library children&#39;s programs&quot;                   
[21] &quot;702x Branch outreach children&#39;s programs&quot;                     
[22] &quot;710x Attendance at children&#39;s programs&quot;                       
[23] &quot;715x Branch in-library young adult programs&quot;                  
[24] &quot;717x Branch outreach young adult programs&quot;                    
[25] &quot;716x Attendance at young adult programs&quot;                      
[26] &quot;671x Branch in-library newcomer/ELL programs, all ages&quot;       
[27] &quot;673x Branch outreach newcomer/ELL programs, all ages&quot;         
[28] &quot;672x Attendance at branch newcomer/ELL programs&quot;              
[29] &quot;740x Professional Librarians, hours worked at this branch&quot;    
[30] &quot;742x Library Technicians, hours worked at this branch&quot;        
[31] &quot;752x Community Librarians, hours worked at this branch&quot;       
[32] &quot;770x Other Staff, hours worked at this branch&quot;                
[33] &quot;975x Number of photocopiers in library branch&quot;                
[34] &quot;852x Is this location LEED certified?&quot;                        
[35] &quot;854x Is this location a Shared Space facility?&quot;               
[36] &quot;860x Branch space/size, total square metres&quot;                  
[37] &quot;890x Hours open per year at this location&quot;                    
[38] &quot;920x Days open per year at this location&quot;                     </code></pre>
<p>Let’s tidy up this data frame and find out how many books—physical materials or volumes—are available within each City:</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="introduction-to-the-bcdata-package.html#cb430-1" aria-hidden="true"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb430-2"><a href="introduction-to-the-bcdata-package.html#cb430-2" aria-hidden="true"></a></span>
<span id="cb430-3"><a href="introduction-to-the-bcdata-package.html#cb430-3" aria-hidden="true"></a>lib_tidy &lt;-<span class="st"> </span>lib_raw <span class="op">%&gt;%</span></span>
<span id="cb430-4"><a href="introduction-to-the-bcdata-package.html#cb430-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="st">`</span><span class="dt">Library System</span><span class="st">`</span>, Location, City, <span class="dt">num_books =</span> <span class="st">&quot;460x Total branch physical materials, volumes held&quot;</span>)</span>
<span id="cb430-5"><a href="introduction-to-the-bcdata-package.html#cb430-5" aria-hidden="true"></a></span>
<span id="cb430-6"><a href="introduction-to-the-bcdata-package.html#cb430-6" aria-hidden="true"></a></span>
<span id="cb430-7"><a href="introduction-to-the-bcdata-package.html#cb430-7" aria-hidden="true"></a>sum_books &lt;-<span class="st"> </span>lib_tidy <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb430-8"><a href="introduction-to-the-bcdata-package.html#cb430-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(City, <span class="st">`</span><span class="dt">Library System</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb430-9"><a href="introduction-to-the-bcdata-package.html#cb430-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total_books =</span> <span class="kw">sum</span>(num_books))</span></code></pre></div>
<pre><code>`summarise()` regrouping output by &#39;City&#39; (override with `.groups` argument)</code></pre>
<blockquote>
<h2 id="challenge-2-10-minutes">Challenge 2 (10 minutes)</h2>
<p>Using <code>dplyr</code>, determine the total number of books within each Library System in British Columbia.</p>
<blockquote>
<h2 id="solution-challenge-2-10-minutes">Solution Challenge 2 (10 minutes)</h2>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="introduction-to-the-bcdata-package.html#cb432-1" aria-hidden="true"></a>sum_books <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb432-2"><a href="introduction-to-the-bcdata-package.html#cb432-2" aria-hidden="true"></a><span class="st"> </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Library System</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb432-3"><a href="introduction-to-the-bcdata-package.html#cb432-3" aria-hidden="true"></a><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">totals =</span> <span class="kw">sum</span>(total_books))</span></code></pre></div>
<pre><code>`summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code># A tibble: 71 x 2
  `Library System`                         totals
  &lt;chr&gt;                                     &lt;dbl&gt;
1 Alert Bay Public Library &amp; Museum          9361
2 Beaver Valley Public Library              25477
3 Bowen Island Public Library               15100
4 Burnaby Public Library                   687751
5 Burns Lake Public Library                 44271
6 Cariboo Regional District Library System 254006
7 Castlegar &amp; District Public Library       75228
8 Chetwynd Public Library                   28674
9 Coquitlam Public Library                  87878
10 Cranbrook Public Library                  71823
# … with 61 more rows</code></pre>
</blockquote>
</blockquote>
</div>
<div id="practice-plotting-data-with-ggplot2" class="section level2" number="9.5">
<h2><span class="header-section-number">9.5</span> Practice plotting data with <code>ggplot2</code></h2>
<p>Now that we have imported, tidied, and summarized our library data, let’s make a static data visualization to share and communicate the results with others.</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="introduction-to-the-bcdata-package.html#cb435-1" aria-hidden="true"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb435-2"><a href="introduction-to-the-bcdata-package.html#cb435-2" aria-hidden="true"></a></span>
<span id="cb435-3"><a href="introduction-to-the-bcdata-package.html#cb435-3" aria-hidden="true"></a>sum_books <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb435-4"><a href="introduction-to-the-bcdata-package.html#cb435-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(total_books, City)) <span class="op">+</span></span>
<span id="cb435-5"><a href="introduction-to-the-bcdata-package.html#cb435-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_col</span>()</span></code></pre></div>
<p><img src="fig/rmd-09-unnamed-chunk-171-1.png" width="816" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="introduction-to-the-bcdata-package.html#cb436-1" aria-hidden="true"></a>sum_books <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb436-2"><a href="introduction-to-the-bcdata-package.html#cb436-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(total_books <span class="op">&gt;</span><span class="st"> </span><span class="dv">100000</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb436-3"><a href="introduction-to-the-bcdata-package.html#cb436-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(total_books, City)) <span class="op">+</span></span>
<span id="cb436-4"><a href="introduction-to-the-bcdata-package.html#cb436-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_col</span>()</span></code></pre></div>
<p><img src="fig/rmd-09-unnamed-chunk-171-2.png" width="816" style="display: block; margin: auto;" /></p>
<blockquote>
<h2 id="challenge-3-10-minutes">Challenge 3 (10 minutes)</h2>
<p>Iterate the above plot to include information on the number of books by Library Service. Add a title to the plot. Try other design changes to make the plot more readable.</p>
<blockquote>
<h2 id="solution-challenge-3-10-minutes">Solution Challenge 3 (10 minutes)</h2>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="introduction-to-the-bcdata-package.html#cb437-1" aria-hidden="true"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb437-2"><a href="introduction-to-the-bcdata-package.html#cb437-2" aria-hidden="true"></a></span>
<span id="cb437-3"><a href="introduction-to-the-bcdata-package.html#cb437-3" aria-hidden="true"></a>sum_books <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb437-4"><a href="introduction-to-the-bcdata-package.html#cb437-4" aria-hidden="true"></a><span class="st"> </span><span class="kw">filter</span>(total_books <span class="op">&gt;</span><span class="st"> </span><span class="dv">100000</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb437-5"><a href="introduction-to-the-bcdata-package.html#cb437-5" aria-hidden="true"></a><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(total_books, City)) <span class="op">+</span></span>
<span id="cb437-6"><a href="introduction-to-the-bcdata-package.html#cb437-6" aria-hidden="true"></a><span class="st"> </span><span class="kw">geom_col</span>() <span class="op">+</span></span>
<span id="cb437-7"><a href="introduction-to-the-bcdata-package.html#cb437-7" aria-hidden="true"></a><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(<span class="st">`</span><span class="dt">Library System</span><span class="st">`</span>)) <span class="op">+</span></span>
<span id="cb437-8"><a href="introduction-to-the-bcdata-package.html#cb437-8" aria-hidden="true"></a><span class="st"> </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb437-9"><a href="introduction-to-the-bcdata-package.html#cb437-9" aria-hidden="true"></a><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>,</span>
<span id="cb437-10"><a href="introduction-to-the-bcdata-package.html#cb437-10" aria-hidden="true"></a>      <span class="dt">y =</span> <span class="ot">NULL</span>,</span>
<span id="cb437-11"><a href="introduction-to-the-bcdata-package.html#cb437-11" aria-hidden="true"></a>      <span class="dt">title =</span> <span class="st">&quot;Total Number of Books by City &amp; Library System in B.C.&quot;</span>,</span>
<span id="cb437-12"><a href="introduction-to-the-bcdata-package.html#cb437-12" aria-hidden="true"></a>      <span class="dt">caption =</span> <span class="st">&quot;Data sourced from the B.C. Data Catalogue&quot;</span>)</span></code></pre></div>
<p><img src="fig/rmd-09-unnamed-chunk-172-1.png" width="816" style="display: block; margin: auto;" /></p>
</blockquote>
</blockquote>
</div>
<div id="using-bcdata-with-spatial-data-in-the-b.c.-data-catalogue" class="section level2" number="9.6">
<h2><span class="header-section-number">9.6</span> Using <code>bcdata</code> with spatial data in the B.C. Data Catalogue</h2>
<p>The <code>bcdata</code> package also has a function for querying and importing geospatial data from the B.C. Data Catalogue. Let’s import the spatial data file from the catalogue record, and combine the spatial data with our tidy library data frame:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="introduction-to-the-bcdata-package.html#cb438-1" aria-hidden="true"></a>lib_spatial &lt;-<span class="st"> </span><span class="kw">bcdc_query_geodata</span>(<span class="st">&quot;bc-public-libraries-systems-branches-and-locations&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb438-2"><a href="introduction-to-the-bcdata-package.html#cb438-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">collect</span>()</span>
<span id="cb438-3"><a href="introduction-to-the-bcdata-package.html#cb438-3" aria-hidden="true"></a></span>
<span id="cb438-4"><a href="introduction-to-the-bcdata-package.html#cb438-4" aria-hidden="true"></a>lib_all &lt;-<span class="st"> </span>lib_spatial <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb438-5"><a href="introduction-to-the-bcdata-package.html#cb438-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(lib_tidy,</span>
<span id="cb438-6"><a href="introduction-to-the-bcdata-package.html#cb438-6" aria-hidden="true"></a>            <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;SERVICE_POINT_NAME&quot;</span> =<span class="st"> &quot;Location&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb438-7"><a href="introduction-to-the-bcdata-package.html#cb438-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(SERVICE_POINT_NAME, num_books) </span></code></pre></div>
<p>Now we can use <code>ggplot2</code> and the <code>geom_sf()</code> function to make a static map, or some of R’s other spatial packages to make interactive maps:</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="introduction-to-the-bcdata-package.html#cb439-1" aria-hidden="true"></a>lib_all <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb439-2"><a href="introduction-to-the-bcdata-package.html#cb439-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span></span>
<span id="cb439-3"><a href="introduction-to-the-bcdata-package.html#cb439-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="kw">aes</span>(<span class="dt">size =</span> num_books), <span class="dt">colour =</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span></span>
<span id="cb439-4"><a href="introduction-to-the-bcdata-package.html#cb439-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<pre><code>Warning: Removed 1 rows containing missing values (geom_sf).</code></pre>
<p><img src="fig/rmd-09-unnamed-chunk-174-1.png" width="816" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="introduction-to-the-bcdata-package.html#cb441-1" aria-hidden="true"></a>mapview<span class="op">::</span><span class="kw">mapview</span>(lib_all)</span></code></pre></div>
<div id="htmlwidget-018cdb51c567ddf75667" style="width:816px;height:816px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-018cdb51c567ddf75667">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addFlatGeoBuf","args":["lib_all","lib_all",null,true,"mvFeatureId",{"radius":6,"stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},{"className":"","pane":"point"},"mapview-popup",{"radius":{"to":[3,15],"from":[3,15]},"weight":{"to":[1,10],"from":[1,10]},"opacity":{"to":[0,1],"from":[0,1]},"fillOpacity":{"to":[0,1],"from":[0,1]}}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-132.184107800721,48.3797458803734,-114.88216180006,58.8038425797474,"lib_all","Zoom to lib_all","<strong> lib_all <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"lib_all",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["lib_all"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"lib_all"}]}],"fitBounds":[48.3797458803734,-132.184107800721,58.8038425797474,-114.88216180006,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="create-tidy-data-with-tidyr.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-analysis-reports.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
